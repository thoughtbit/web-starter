import{_,o as h,c as f,a as c,n as b,v as w,d as v,k as C,r as d,b as u,w as m,e as p,t as k}from"./index.0b1ad4d3.js";const x=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak preview print save searchreplace tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],I=["searchreplace fontsizeselect bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link charmap preview anchor pagebreak insertdatetime table emoticons forecolor backcolor fullscreen"];let r=[];function $(){return window.tinymce}const S=(e,t)=>{const o=document.getElementById(e),i=t||function(){};if(!o){const n=document.createElement("script");n.src=e,n.id=e,document.body.appendChild(n),r.push(i),("onload"in n?a:s)(n)}o&&i&&($()?i(null,o):r.push(i));function a(n){n.onload=function(){this.onerror=this.onload=null;for(const l of r)l(null,n);r=null},n.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+e),n)}}function s(n){n.onreadystatechange=function(){if(!(this.readyState!=="complete"&&this.readyState!=="loaded")){this.onreadystatechange=null;for(const l of r)l(null,n);r=null}}}};const E="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",V={name:"Tinymce",props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+((Math.random()*1e3).toFixed(0)+"")}},modelValue:{type:String,default:""},toolbar:{type:Array,required:!1,default(){return[]}},menubar:{type:String,default:"edit view format table"},height:{type:[Number,String],required:!1,default:400},width:{type:[Number,String],required:!1,default:"auto"}},data(){return{hasInit:!1,tinymceId:null,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth(){const e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?`${e}px`:e}},watch:{modelValue(e){this.hasInit&&this.getContent()!==e&&this.$nextTick(()=>window.tinymce.get(this.tinymceId).setContent(e||""))}},created(){this.tinymceId=this.id},mounted(){this.init()},activated(){window.tinymce&&this.initTinymce()},deactivated(){this.destroyTinymce()},destroyed(){this.destroyTinymce()},methods:{init(){S(E,e=>{if(e){console.log(e.message);return}this.initTinymce()})},initTinymce(){const e=this;window.tinymce.init({selector:`#${this.tinymceId}`,language:this.languageTypeList.zh,height:this.height,body_class:"panel-body ",object_resizing:!0,toolbar:this.toolbar.length>0?this.toolbar:I,menubar:this.menubar,plugins:x,end_container_on_empty_block:!0,powerpaste_word_import:"propmt",powerpaste_html_import:"propmt",powerpaste_allow_local_images:!0,paste_data_images:!0,code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,fontsize_formats:"11pt 12pt 12pt 14pt 18pt 24pt 36pt 72pt",nonbreaking_force_tab:!0,init_instance_callback:t=>{e.modelValue&&t.setContent(e.modelValue),e.hasInit=!0,t.on("NodeChange Change KeyUp SetContent",()=>{this.$emit("update:modelValue",t.getContent())})},paste_preprocess:(t,o)=>{let i=[];o.content.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,(a,s)=>{s.indexOf("//")===0?i.push("http:"+s):i.push(s)}),i.length>0&&this.uploadRemoteFile(i,0)},images_upload_handler:function(t,o,i){let a=t.blob();a.name||(a=new window.File([a],"image.png"));let s=new FormData;s.append("file",a),uploadImage(s).then(n=>{o({}.VUE_APP_Image+"/"+n.data)})},setup(t){t.on("FullscreenStateChanged",o=>{e.fullscreen=o.state})},convert_urls:!1})},destroyTinymce(){const e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent(){return window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK(e){window.tinymce.get(this.tinymceId).insertContent(`<img src="${{}.VUE_APP_Image}/${e}" >`)},uploadRemoteFile(e,t){}}},T=["id"];function D(e,t,o,i,a,s){return h(),f("div",{class:b([{fullscreen:a.fullscreen},"tinymce-container"]),style:w({width:s.containerWidth})},[c("textarea",{id:a.tinymceId,class:"tinymce-textarea"},null,8,T)],6)}var F=_(V,[["render",D],["__scopeId","data-v-196fc5a6"]]);const z=v({components:{tinymce:F},setup(){let e=C("");function t(){e.value="\u6211\u662F\u4E00\u4E2A\u521D\u59CB\u503C"}return{word:e,setData:t}}}),B={class:"layout-container"},N={class:"layout-container-table"},A={style:{"text-align":"left"}};function j(e,t,o,i,a,s){const n=d("tinymce"),l=d("el-button"),y=d("el-card");return h(),f("div",B,[c("div",N,[u(n,{modelValue:e.word,"onUpdate:modelValue":t[0]||(t[0]=g=>e.word=g)},null,8,["modelValue"]),u(y,{class:"box-card"},{header:m(()=>[c("p",A,[p(" v-model\u7ED3\u679C "),u(l,{style:{float:"right",padding:"3px 0"},type:"text",onClick:e.setData},{default:m(()=>[p("\u521D\u59CB\u8D4B\u503C")]),_:1},8,["onClick"])])]),default:m(()=>[c("div",null,k(e.word),1)]),_:1})])])}var P=_(z,[["render",j],["__scopeId","data-v-2655fd2b"]]);export{P as default};
