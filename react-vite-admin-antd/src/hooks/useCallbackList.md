# è‡ªå®šä¹‰é’©å­ useCallbackList ğŸ˜

ä»¿ useCallback é£æ ¼çš„å¾ªç¯ç»‘å®šäº‹ä»¶çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ  
ç”¨äºç¼“å­˜å¾ªç¯å¾—åˆ°çš„å‡½æ•°

| å‚æ•°           | ç±»å‹     | å¿…å¡« | é‡Šä¹‰                                                                                  |
| -------------- | -------- | ---- | ------------------------------------------------------------------------------------- |
| depArray       | array    | âœ”ï¸   | éœ€è¦å¾ªç¯çš„æ•°ç»„                                                                        |
| callbackMapper | function | âœ”ï¸   | ç”Ÿæˆå¯¹åº”å›è°ƒå‡½æ•°çš„æŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œæ¥æ”¶ä¸ Array.map æ–¹æ³•ç›¸åŒçš„å‚æ•°ï¼Œè¿”å›ç”¨äºç»‘å®šäº‹ä»¶çš„å‡½æ•° |
| dependencies   | array    | âœ”ï¸   | å¤–éƒ¨ä¾èµ–                                                                              |

## How To Use

åœ¨å¾ªç¯æ¸²æŸ“çš„æ—¶å€™ï¼Œå¦‚æœæœ‰é‡åˆ°äº‹ä»¶ç»‘å®šçš„æƒ…å½¢ï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹å¼ç”Ÿæˆå¹¶ç»‘å®šã€‚

**_è¯¥é’©å­ä»…ä½¿ç”¨äºå‡½æ•°å¼ç»„ä»¶_**

```tsx
const clickHandlers = useCallbackList(
	array,
	(item, index, array) => {
		// just like using Array.map()
		return (onclick_prop) => {
			// do something here with item, index, the loop array itself, and child's onclick params
		};
	},
	[
		/* deps here, empty to store once*/
	]
);
return (
	<View>
		{array.map((item, index) => (
			// get the handler by index,
			<Child onClick={clickHandlers[index]}></Child>
		))}
	</View>
);
```

## åœºæ™¯ ğŸ˜¿

åœ¨ Hooks ä¸­å¾ªç¯æ¸²æŸ“ç»„ä»¶å¹¶ç»‘å®šäº‹ä»¶æ—¶  
å†…è”ç®­å¤´å‡½æ•°ã€æŸ¯é‡ŒåŒ–å‡½æ•°ç­‰æ–¹å¼ï¼Œä¼šåœ¨æ¸²æŸ“æ—¶ç”Ÿæˆæ–°çš„å‡½æ•°  
å› æ­¤å³ä½¿å­ç»„ä»¶ä½¿ç”¨ React.memo å°è£…ï¼Œç”±äºæ–°å‡½æ•°çš„å†…å­˜åœ°å€ä¸ä¸€è‡´  
è¿˜æ˜¯ä¼šå¯¼è‡´çˆ¶ç»„ä»¶åˆ·æ–°æ—¶ï¼Œå­ç»„ä»¶ä¹Ÿè·Ÿç€åˆ·æ–°ã€‚

### å†…è”ç®­å¤´å‡½æ•°

```tsx
//æ¯æ¬¡renderæ—¶ï¼Œ()=>{} å­—é¢é‡å£°æ˜æ–°å‡½æ•°
return (
	<Father>
		{arrary.map((item) => (
			<Child onClick={() => doSomething(item)}></Child>
		))}
	</Father>
);
```

### æŸ¯é‡ŒåŒ–å‡½æ•°

```tsx
//æ¯æ¬¡renderæ—¶ï¼Œè°ƒç”¨generateNewFunctioné‡æ–°ç”Ÿæˆæ–°å‡½æ•°ï¼Œæœ¬è´¨åŒä¸Š
generateNewFunction(item) => () => { doSomething(item) }
return (
  <Father>
    {arrary.map((item) => (
      <Child onClick={generateNewFunction(item)}></Child>
    ))}
  </Father>
)
```

## ä¼˜åŒ–ç›®æ ‡ ğŸ¯

çˆ¶ç»„ä»¶åˆ·æ–°æ—¶ï¼Œè‹¥ä¸€ä¸ªæ•°ç»„çš„æ•°æ®æœªå˜åŒ–ï¼Œåˆ™å®ƒ map æ¸²æŸ“çš„å­ç»„ä»¶ä¸åº”è¯¥é‡æ–°æ¸²æŸ“ã€‚

### æ€è·¯

ç»„ä»¶æ¸²æŸ“å‰ï¼Œå…ˆæ ¹æ®éœ€è¦éå†çš„æ•°ç»„ï¼Œæå‰æŸ¯é‡ŒåŒ–å¯¹åº”æ•°é‡çš„å›è°ƒå‡½æ•°ï¼Œå¹¶ç¼“å­˜åˆ°ä¸€ä¸ªæ•°ç»„ä¸­  
ç»‘å®šäº‹ä»¶æ—¶ï¼Œé€šè¿‡ç´¢å¼•ç›´æ¥è®¿é—®ç¼“å­˜æ•°ç»„ä¸­çš„å‡½æ•°ï¼Œä»¥ä¿è¯å­ç»„ä»¶è·å–çš„å‡½æ•°å†…å­˜åœ°å€ä¸å˜ã€‚

### å®ç°

å‡½æ•°å†…éƒ¨æœ‰ä¸‰ä¸ª Refï¼Œåˆ†åˆ«ç”¨äºè®°å½•ç¼“å­˜éå†çš„æ•°ç»„ prevArray ã€ä¾èµ–æ•°ç»„ prevDependencies å’Œ éå†çš„ç»“æœ storedResult  
æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œå°† depArray ä¸ prevArray ã€ dependencies ä¸ prevDependencies è¿›è¡Œé•¿åº¦æ¯”è¾ƒå’Œé€ä¸ªå…ƒç´ çš„æµ…æ¯”è¾ƒ

å¦‚æœé•¿åº¦ä¸ä¸€è‡´æˆ–è€…æŸä¸€ä¸ªå…ƒç´ ä¸ç›¸åŒï¼Œåˆ™é‡æ–°æŸ¯é‡ŒåŒ–ç”Ÿæˆæ–°çš„å‡½æ•°æ•°ç»„å¹¶ç¼“å­˜ã€‚

å¦‚æœæ•°ç»„å’Œä¾èµ–éƒ½æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ç›´æ¥è¿”å›å…ˆå‰ç¼“å­˜çš„éå†ç»“æœ storedResultã€‚
